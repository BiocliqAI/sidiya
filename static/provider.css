/* ==========================================================================
   SIDIYA — Clinical Command Center
   Production-grade provider dashboard extending Midnight Clinical theme
   ========================================================================== */

/* ── Scaffolding — LOCKED VIEWPORT, no full-page scroll ── */
html,body { height:100%; overflow:hidden; }
.dash { height:100vh; display:flex; flex-direction:column; overflow:hidden; position:relative; z-index:1; }

/* ── Top Bar ── */
.dash-topbar {
  display:flex; align-items:center; gap:16px;
  padding:12px 24px; background:var(--bg-glass);
  backdrop-filter:blur(24px); -webkit-backdrop-filter:blur(24px);
  border-bottom:1px solid var(--border);
  position:sticky; top:0; z-index:100;
}
.topbar-brand { font-family:var(--font-display); font-size:26px; color:var(--accent); margin:0; white-space:nowrap; }
.topbar-divider { width:1px; height:24px; background:var(--border); }
.topbar-title { font-size:14px; color:var(--text-muted); font-weight:500; white-space:nowrap; }
.topbar-tabs { display:flex; gap:4px; margin-left:auto; }
.tab-btn {
  display:inline-flex; align-items:center; gap:6px;
  padding:8px 16px; font-size:13px; font-weight:600;
  color:var(--text-muted); background:transparent; border:1px solid transparent;
  border-radius:var(--radius-xs); cursor:pointer; font-family:var(--font-body);
  transition:all .2s; white-space:nowrap; box-shadow:none; position:relative;
}
.tab-btn::after { display:none; }
.tab-btn:hover { color:var(--text); background:var(--bg-raised); transform:none; box-shadow:none; }
.tab-btn.active { color:var(--accent); background:var(--accent-glow); border-color:rgba(0,212,170,.15); }
.tab-btn svg { flex-shrink:0; }
.tab-badge {
  position:absolute; top:-4px; right:-4px;
  background:var(--danger); color:#fff; font-size:10px; font-weight:800;
  padding:2px 6px; border-radius:10px; min-width:18px; text-align:center;
}
.topbar-right { display:flex; gap:8px; margin-left:16px; }
.topbar-link {
  font-size:12px; color:var(--text-muted); text-decoration:none;
  padding:6px 10px; border:1px solid var(--border); border-radius:var(--radius-xs);
  transition:all .2s;
}
.topbar-link:hover { color:var(--text); border-color:var(--accent-dim); }

/* ── Top Bar — fixed height, never scrolls ── */
.dash-topbar { flex-shrink:0; }

/* ── Tab Panels — fill remaining viewport, no overflow ── */
.tab-panel { display:none; padding:20px 24px 0; flex-direction:column; overflow:hidden; min-height:0; }
.tab-panel.active { display:flex; flex:1; animation:fadeSlide .35s ease both; }
@keyframes fadeSlide { from { opacity:0; transform:translateY(8px); } to { opacity:1; transform:none; } }

/* ── KPI Row — fixed height, never scrolls ── */
.kpi-row { display:grid; grid-template-columns:repeat(4,1fr); gap:16px; margin-bottom:20px; flex-shrink:0; }
.kpi-card {
  display:flex; align-items:center; gap:14px;
  padding:18px 20px; background:var(--bg-glass);
  backdrop-filter:blur(12px); border:1px solid var(--border);
  border-radius:var(--radius); transition:border-color .2s;
}
.kpi-card:hover { border-color:var(--border-lit); }
.kpi-icon { font-size:28px; opacity:.85; }
.kpi-value { font-family:var(--font-display); font-size:28px; color:var(--text); line-height:1; }
.kpi-label { font-size:12px; color:var(--text-muted); margin-top:2px; text-transform:uppercase; letter-spacing:.04em; font-weight:600; }
.kpi-sub { font-size:11px; color:var(--text-muted); margin-left:auto; }
.kpi-alerts .kpi-value { color:var(--danger); }

/* ── Command Center Two-Pane — fills remaining height, each pane scrolls independently ── */
.command-layout { display:grid; grid-template-columns:340px 1fr; gap:20px; flex:1; min-height:0; }

/* Alert Sidebar — fills grid cell, scrolls internally */
.alert-sidebar {
  display:flex; flex-direction:column; min-height:0;
  background:var(--bg-glass); backdrop-filter:blur(12px);
  border:1px solid var(--border); border-radius:var(--radius);
  overflow:hidden;
}
.sidebar-header { padding:16px 18px 12px; border-bottom:1px solid var(--border); }
.sidebar-title { font-family:var(--font-display); font-size:20px; margin-bottom:10px; }
.sidebar-filters { display:flex; gap:4px; }
.filter-btn {
  padding:5px 12px; font-size:11px; font-weight:700; text-transform:uppercase; letter-spacing:.04em;
  background:transparent; color:var(--text-muted); border:1px solid var(--border);
  border-radius:var(--radius-xs); cursor:pointer; font-family:var(--font-body);
  transition:all .15s; box-shadow:none;
}
.filter-btn::after { display:none; }
.filter-btn:hover { color:var(--text); border-color:var(--border-lit); transform:none; box-shadow:none; }
.filter-btn.active { color:var(--accent); border-color:var(--accent-dim); background:var(--accent-glow); }

.alert-queue { flex:1; overflow-y:auto; padding:8px; }
.alert-queue::-webkit-scrollbar { width:5px; }
.alert-queue::-webkit-scrollbar-thumb { background:var(--bg-surface); border-radius:3px; }

.sidebar-empty { padding:24px; text-align:center; color:var(--text-muted); font-size:13px; }

/* Alert Patient Groups (collapsible accordion) */
.alert-patient-group { border:1px solid var(--border); border-radius:var(--radius-sm); margin-bottom:6px; overflow:hidden; }
.alert-patient-group.severity-critical { border-left:3px solid var(--danger); }
.alert-patient-group.severity-warning { border-left:3px solid var(--warn); }
.alert-patient-group.severity-info { border-left:3px solid var(--accent); }

.apg-header {
  display:flex; align-items:center; gap:10px; padding:10px 12px;
  cursor:pointer; transition:background .15s; user-select:none;
}
.apg-header:hover { background:var(--bg-raised); }
.alert-patient-group.open .apg-header { border-bottom:1px solid var(--border); background:var(--bg-raised); }

.apg-chevron { width:16px; height:16px; flex-shrink:0; color:var(--text-muted); transition:transform .2s; }
.alert-patient-group.open .apg-chevron { transform:rotate(90deg); }

.apg-name { font-weight:700; font-size:13px; flex:1; min-width:0; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.apg-count {
  font-size:10px; font-weight:800; padding:2px 8px; border-radius:10px;
  white-space:nowrap; flex-shrink:0;
}
.apg-count.cnt-critical { background:var(--danger-dim); color:var(--danger); }
.apg-count.cnt-warning { background:var(--warn-dim); color:var(--warn); }
.apg-count.cnt-info { background:var(--accent-glow); color:var(--accent); }
.apg-time { font-size:10px; color:var(--text-muted); flex-shrink:0; }

.apg-body { display:none; padding:4px 6px 6px; }
.alert-patient-group.open .apg-body { display:block; }

/* Alert Cards (inside groups) */
.alert-card {
  padding:10px 12px; border-radius:var(--radius-xs);
  border:1px solid var(--border); margin-bottom:4px;
  transition:all .15s; position:relative;
}
.alert-card:hover { border-color:var(--border-lit); background:var(--bg-surface); }
.alert-card.severity-critical { border-left:3px solid var(--danger); }
.alert-card.severity-warning { border-left:3px solid var(--warn); }
.alert-card.severity-info { border-left:3px solid var(--accent); }
.ac-top { display:flex; justify-content:space-between; align-items:flex-start; gap:8px; }
.ac-patient { font-weight:700; font-size:13px; }
.ac-time { font-size:11px; color:var(--text-muted); white-space:nowrap; }
.ac-trigger { font-size:12px; color:var(--text-soft); margin-top:3px; }
.ac-level { display:inline-block; font-size:10px; font-weight:800; text-transform:uppercase; letter-spacing:.05em; padding:2px 7px; border-radius:8px; margin-top:6px; }
.ac-level.lv-0 { background:var(--accent-glow); color:var(--accent); }
.ac-level.lv-1 { background:var(--warn-dim); color:var(--warn); }
.ac-level.lv-2 { background:var(--danger-dim); color:var(--danger); }
.ac-actions { display:flex; gap:4px; margin-top:8px; }
.ac-btn {
  padding:5px 10px; font-size:11px; font-weight:600;
  background:var(--bg-surface); border:1px solid var(--border); color:var(--text-soft);
  border-radius:var(--radius-xs); cursor:pointer; font-family:var(--font-body);
  transition:all .15s; box-shadow:none;
}
.ac-btn::after { display:none; }
.ac-btn:hover { border-color:var(--accent); color:var(--accent); transform:none; box-shadow:none; }
.ac-btn-resolve {
  background:var(--accent); color:var(--bg-deep); border-color:var(--accent);
}
.ac-btn-resolve:hover { background:#00eabb; border-color:#00eabb; color:var(--bg-deep); }

/* ── Patient Main — fills grid cell, scrolls internally ── */
.patient-main { display:flex; flex-direction:column; min-height:0; overflow:hidden; }
.patient-main-header { display:flex; align-items:center; gap:16px; margin-bottom:16px; flex-shrink:0; }
.section-title { font-family:var(--font-display); font-size:22px; flex-shrink:0; }
.patient-search-wrap { flex:1; max-width:280px; }
.patient-search {
  width:100%; padding:8px 14px; font-size:13px; background:var(--bg-raised);
  border:1px solid var(--border); border-radius:var(--radius-xs); color:var(--text);
  font-family:var(--font-body);
}
.patient-search:focus { outline:none; border-color:var(--accent); }
.btn-icon {
  width:36px; height:36px; display:inline-flex; align-items:center; justify-content:center;
  background:var(--bg-raised); border:1px solid var(--border); color:var(--text-soft);
  border-radius:var(--radius-xs); cursor:pointer; font-size:16px;
  transition:all .15s; font-family:var(--font-body); box-shadow:none;
}
.btn-icon::after { display:none; }
.btn-icon:hover { border-color:var(--accent); color:var(--accent); transform:none; box-shadow:none; }

/* Patient Cards Grid — scrollable within its pane */
.patient-grid { display:flex; flex-direction:column; gap:8px; flex:1; overflow-y:auto; padding-bottom:20px; }
.patient-grid::-webkit-scrollbar { width:5px; }
.patient-grid::-webkit-scrollbar-thumb { background:var(--bg-surface); border-radius:3px; }

.patient-card {
  display:grid; grid-template-columns:auto 1fr auto; gap:14px; align-items:center;
  padding:16px 18px; border-radius:var(--radius-sm);
  background:var(--bg-raised); border:1px solid var(--border);
  cursor:pointer; transition:all .15s;
}
.patient-card:hover { border-color:var(--border-lit); background:var(--bg-surface); }
.patient-card.expanded { border-color:var(--accent-dim); }

.pc-dot { width:10px; height:10px; border-radius:50%; flex-shrink:0; }
.pc-dot.good { background:var(--accent); }
.pc-dot.at_risk { background:var(--warn); }
.pc-dot.critical { background:var(--danger); animation:pulse 1.5s ease infinite; }
@keyframes pulse { 0%,100%{opacity:1}50%{opacity:.4} }

.pc-info { min-width:0; }
.pc-name { font-weight:700; font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.pc-sub { font-size:12px; color:var(--text-soft); margin-top:2px; display:flex; flex-wrap:wrap; gap:8px; }

.pc-right { display:flex; align-items:center; gap:12px; flex-shrink:0; }
.pc-phase {
  font-size:10px; font-weight:700; text-transform:uppercase; letter-spacing:.04em;
  padding:3px 8px; border-radius:10px; white-space:nowrap;
}
.pc-phase.p-0-7 { background:rgba(0,212,170,.12); color:var(--accent); }
.pc-phase.p-8-30 { background:rgba(100,140,255,.12); color:#648cff; }
.pc-phase.p-31-90 { background:rgba(180,120,255,.12); color:#b478ff; }

.pc-vitals { display:flex; gap:6px; }
.pc-vital {
  width:28px; height:28px; display:flex; align-items:center; justify-content:center;
  border-radius:50%; font-size:12px; font-weight:700;
}
.pc-vital.done { background:var(--accent-glow); color:var(--accent); }
.pc-vital.missed { background:var(--danger-dim); color:var(--danger); }
.pc-vital.pending { background:var(--bg-surface); color:var(--text-muted); }

.pc-score {
  font-size:14px; font-weight:700; padding:4px 10px; border-radius:var(--radius-xs);
}
.pc-score.good { color:var(--accent); background:var(--accent-glow); }
.pc-score.at_risk { color:var(--warn); background:var(--warn-dim); }
.pc-score.critical { color:var(--danger); background:var(--danger-dim); }

.pc-sparkline { width:60px; height:24px; }
.pc-alerts-badge {
  font-size:11px; font-weight:700; color:var(--danger); padding:3px 8px;
  background:var(--danger-dim); border-radius:10px; white-space:nowrap;
}

/* ── Patient Detail Slide-in ── */
.patient-detail-panel {
  position:fixed; top:0; right:0; bottom:0; width:520px;
  background:var(--bg-base); border-left:1px solid var(--border);
  z-index:150; overflow-y:auto; box-shadow:-8px 0 40px rgba(0,0,0,.4);
  transform:translateX(100%); transition:transform .3s var(--ease-out);
}
.patient-detail-panel:not([hidden]) { transform:translateX(0); }
.detail-header { padding:24px 24px 16px; border-bottom:1px solid var(--border); }
.detail-close { position:absolute; top:16px; right:16px; }
.detail-name { font-family:var(--font-display); font-size:24px; margin:0 0 4px; }
.detail-meta { font-size:13px; color:var(--text-soft); }
.detail-body { padding:16px 24px 40px; }
.detail-section { margin-bottom:24px; }
.detail-section h3 { font-size:14px; font-weight:700; color:var(--text-soft); text-transform:uppercase; letter-spacing:.04em; margin-bottom:10px; }

.today-row { display:flex; gap:10px; align-items:center; padding:7px 0; border-bottom:1px solid var(--border); font-size:13px; }
.today-row .t-icon { font-size:14px; }
.today-row .t-time { color:var(--text-muted); width:44px; flex-shrink:0; }
.today-row .t-desc { flex:1; }
.today-row .t-status { font-weight:700; }
.today-row .t-status.done { color:var(--accent); }
.today-row .t-status.pending { color:var(--text-muted); }
.today-row .t-status.missed { color:var(--danger); }

/* Escalation history in detail */
.esc-item { padding:10px 12px; border-radius:var(--radius-xs); border:1px solid var(--border); margin-bottom:6px; font-size:12px; }
.esc-item.esc-open { border-left:3px solid var(--danger); }
.esc-item.esc-resolved { border-left:3px solid var(--accent); opacity:.7; }
.esc-top { display:flex; justify-content:space-between; }
.esc-trigger { font-weight:600; }
.esc-date { color:var(--text-muted); }
.esc-resolution { color:var(--text-soft); margin-top:4px; font-style:italic; }

/* Notes */
.note-item { padding:10px 12px; border-radius:var(--radius-xs); border:1px solid var(--border); margin-bottom:6px; }
.note-meta { font-size:11px; color:var(--text-muted); margin-bottom:4px; display:flex; gap:8px; }
.note-type-badge { font-size:10px; font-weight:700; text-transform:uppercase; padding:2px 6px; border-radius:6px; background:var(--bg-surface); color:var(--text-soft); }
.note-text { font-size:13px; color:var(--text); }
.add-note-form { display:grid; gap:8px; margin-top:12px; }
.add-note-form textarea {
  width:100%; padding:10px; font-size:13px; background:var(--bg-raised);
  border:1px solid var(--border); border-radius:var(--radius-xs); color:var(--text);
  font-family:var(--font-body); resize:vertical;
}
.add-note-form textarea:focus { outline:none; border-color:var(--accent); }
.add-note-form select {
  padding:8px; font-size:12px; background:var(--bg-raised);
  border:1px solid var(--border); border-radius:var(--radius-xs); color:var(--text);
  font-family:var(--font-body);
}
.btn-sm { padding:7px 14px; font-size:12px; font-weight:600; border-radius:var(--radius-xs); cursor:pointer; font-family:var(--font-body); }
.btn-primary { background:var(--accent); color:var(--bg-deep); border:none; box-shadow:none; }
.btn-primary::after { display:none; }
.btn-primary:hover { background:#00eabb; transform:none; box-shadow:none; }
.btn-ghost { background:transparent; color:var(--text-soft); border:1px solid var(--border); box-shadow:none; }
.btn-ghost::after { display:none; }
.btn-ghost:hover { color:var(--text); border-color:var(--border-lit); transform:none; box-shadow:none; }

/* ── Alert Drawer ── */
.alert-drawer { position:fixed; inset:0; z-index:200; display:flex; align-items:flex-end; justify-content:center; }
.alert-drawer[hidden] { display:none; }
.drawer-overlay { position:absolute; inset:0; background:rgba(0,0,0,.5); }
.drawer-content {
  position:relative; width:100%; max-width:560px;
  background:var(--bg-base); border-top:1px solid var(--border);
  border-radius:var(--radius) var(--radius) 0 0;
  padding:24px; max-height:80vh; overflow-y:auto;
  animation:slideUp .25s var(--ease-out);
}
@keyframes slideUp { from { transform:translateY(100%); } to { transform:none; } }
.drawer-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; }
.drawer-header h3 { font-family:var(--font-display); font-size:22px; margin:0; }
.drawer-actions { display:grid; grid-template-columns:1fr 1fr; gap:8px; margin-bottom:16px; }
.da-btn {
  padding:12px 14px; font-size:13px; font-weight:600; text-align:left;
  background:var(--bg-raised); border:1px solid var(--border); color:var(--text);
  border-radius:var(--radius-sm); cursor:pointer; font-family:var(--font-body);
  transition:all .15s; box-shadow:none;
}
.da-btn::after { display:none; }
.da-btn:hover { border-color:var(--accent); background:var(--accent-glow); transform:none; box-shadow:none; }
.da-btn-danger:hover { border-color:var(--danger); background:var(--danger-dim); }
.drawer-note label { display:block; font-size:12px; color:var(--text-soft); margin-bottom:6px; font-weight:600; text-transform:uppercase; letter-spacing:.04em; }
.drawer-note textarea {
  width:100%; padding:10px; font-size:13px; background:var(--bg-raised);
  border:1px solid var(--border); border-radius:var(--radius-xs); color:var(--text);
  font-family:var(--font-body); resize:vertical;
}
.drawer-note textarea:focus { outline:none; border-color:var(--accent); }

/* ── Onboarding Tab — fills panel, internal scroll ── */
.onboard-layout { display:grid; grid-template-columns:1fr 360px; gap:24px; flex:1; min-height:0; }

.wizard-steps { display:flex; align-items:center; gap:0; margin-bottom:28px; }
.wizard-step {
  display:flex; align-items:center; gap:8px; padding:8px 16px;
  border-radius:var(--radius-xs); transition:all .2s;
}
.wizard-step.active .step-num { background:var(--accent); color:var(--bg-deep); }
.wizard-step.done .step-num { background:var(--accent); color:var(--bg-deep); }
.step-num {
  width:28px; height:28px; display:flex; align-items:center; justify-content:center;
  border-radius:50%; background:var(--bg-surface); color:var(--text-muted);
  font-size:13px; font-weight:800;
}
.step-label { font-size:13px; font-weight:600; color:var(--text-soft); }
.wizard-step.active .step-label { color:var(--text); }
.wizard-connector { flex:1; height:2px; background:var(--border); margin:0 4px; }

.wizard-panel { display:none; }
.wizard-panel.active { display:block; animation:fadeSlide .3s ease both; }

/* Upload zone */
.upload-drop-zone {
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  padding:56px 24px; cursor:pointer; border:2px dashed var(--border);
  border-radius:var(--radius); transition:all .25s;
}
.upload-drop-zone:hover, .upload-drop-zone.drag-over {
  border-color:var(--accent); background:var(--accent-glow);
}
.upload-icon-large { color:var(--text-muted); margin-bottom:16px; transition:color .25s; }
.upload-drop-zone:hover .upload-icon-large { color:var(--accent); }
.upload-label { font-size:16px; font-weight:600; color:var(--text); }
.upload-sublabel { font-size:13px; color:var(--text-muted); margin-top:4px; }
.upload-progress { padding:16px; }
.progress-track { width:100%; height:6px; background:var(--bg-surface); border-radius:3px; overflow:hidden; margin-bottom:10px; }
.progress-fill { height:100%; background:linear-gradient(90deg,var(--accent),#00eabc); border-radius:3px; transition:width .4s ease; width:0; }
.progress-text { font-size:13px; color:var(--text-soft); }
.progress-text.error { color:var(--danger); }

/* Review card */
.review-card { padding:20px; background:var(--bg-raised); border:1px solid var(--border); border-radius:var(--radius-sm); }
.rc-grid { display:grid; grid-template-columns:1fr 1fr; gap:0; }
.rc-kv { display:flex; justify-content:space-between; padding:8px 12px; border-bottom:1px solid var(--border); font-size:13px; }
.rc-kv:nth-child(odd) { border-right:1px solid var(--border); }
.rc-k { color:var(--text-soft); font-weight:600; font-size:11px; text-transform:uppercase; letter-spacing:.03em; }
.rc-v { color:var(--text); text-align:right; }

.review-details-block { margin-top:16px; border:1px solid var(--border); border-radius:var(--radius-sm); }
.review-details-block summary { padding:12px 16px; font-weight:600; font-size:13px; color:var(--text-soft); cursor:pointer; }
.review-details-block summary:hover { color:var(--accent); }
.review-details-block[open] summary { border-bottom:1px solid var(--border); }
.review-details-block > div { padding:14px; }

.mini-table { width:100%; border-collapse:collapse; font-size:12px; }
.mini-table th,.mini-table td { padding:7px 10px; text-align:left; border-bottom:1px solid var(--border); }
.mini-table th { background:var(--bg-surface); color:var(--text-soft); font-size:10px; font-weight:700; text-transform:uppercase; letter-spacing:.05em; }

.review-nav { display:flex; gap:8px; margin-top:16px; }
.review-link { font-size:12px; color:var(--text-soft); text-decoration:none; padding:6px 12px; border:1px solid var(--border); border-radius:var(--radius-xs); transition:all .2s; }
.review-link:hover { color:var(--accent); border-color:var(--accent-dim); }

.wiz-actions { display:flex; justify-content:space-between; margin-top:24px; }

/* Register form */
.register-form-grid { display:grid; gap:14px; }
.rf-field label { display:block; font-size:12px; color:var(--text-soft); font-weight:600; text-transform:uppercase; letter-spacing:.04em; margin-bottom:6px; }
.rf-field input { width:100%; padding:12px 14px; font-size:14px; background:var(--bg-raised); border:1px solid var(--border); border-radius:var(--radius-xs); color:var(--text); font-family:var(--font-body); }
.rf-field input:focus { outline:none; border-color:var(--accent); }
.required { color:var(--danger); }
.rf-actions { display:flex; justify-content:space-between; margin-top:8px; }
.rf-feedback { font-size:13px; margin-top:8px; }
.rf-feedback.success { color:var(--accent); }
.rf-feedback.error { color:var(--danger); }

/* Onboard wizard — scrollable within its pane */
.onboard-wizard { overflow-y:auto; min-height:0; padding-bottom:20px; }
.onboard-wizard::-webkit-scrollbar { width:5px; }
.onboard-wizard::-webkit-scrollbar-thumb { background:var(--bg-surface); border-radius:3px; }

/* Extraction history sidebar — fills grid cell, scrolls internally */
.onboard-history {
  display:flex; flex-direction:column; min-height:0;
  background:var(--bg-glass); backdrop-filter:blur(12px);
  border:1px solid var(--border); border-radius:var(--radius);
  overflow:hidden;
}
.oh-header { display:flex; justify-content:space-between; align-items:center; padding:16px 18px 12px; border-bottom:1px solid var(--border); }
.extraction-list { flex:1; overflow-y:auto; padding:8px; }

.ext-card { padding:12px 14px; border-radius:var(--radius-xs); border:1px solid var(--border); margin-bottom:6px; cursor:pointer; transition:all .15s; }
.ext-card:hover { border-color:var(--border-lit); background:var(--bg-raised); }
.ext-name { font-weight:600; font-size:13px; }
.ext-meta { font-size:11px; color:var(--text-muted); margin-top:2px; }
.ext-bottom { display:flex; justify-content:space-between; align-items:center; margin-top:6px; }
.ext-badge { font-size:10px; font-weight:700; text-transform:uppercase; padding:2px 8px; border-radius:8px; }
.ext-badge.status-extracted { background:var(--warn-dim); color:var(--warn); }
.ext-badge.status-registered { background:var(--accent-glow); color:var(--accent); }
.ext-actions { display:flex; gap:6px; }
.ext-link { font-size:11px; color:var(--text-muted); text-decoration:none; padding:2px 6px; border:1px solid var(--border); border-radius:4px; transition:all .15s; }
.ext-link:hover { color:var(--accent); border-color:var(--accent-dim); }

/* ── Analytics Tab — scrolls within its pane ── */
.analytics-grid { display:grid; grid-template-columns:1fr 1fr; gap:20px; flex:1; overflow-y:auto; min-height:0; padding-bottom:24px; }
.analytics-grid::-webkit-scrollbar { width:5px; }
.analytics-grid::-webkit-scrollbar-thumb { background:var(--bg-surface); border-radius:3px; }
.analytics-card {
  padding:24px; background:var(--bg-glass); backdrop-filter:blur(12px);
  border:1px solid var(--border); border-radius:var(--radius);
}
.analytics-wide { grid-column:1/-1; }
.ac-title { font-family:var(--font-display); font-size:18px; margin-bottom:16px; }
.ac-subtitle { font-size:12px; font-weight:700; color:var(--text-soft); text-transform:uppercase; letter-spacing:.04em; margin:16px 0 10px; }

.esc-summary { display:grid; grid-template-columns:repeat(3,1fr); gap:12px; }
.es-stat { text-align:center; padding:16px; background:var(--bg-raised); border-radius:var(--radius-sm); }
.es-val { font-family:var(--font-display); font-size:28px; }
.es-label { font-size:11px; color:var(--text-muted); text-transform:uppercase; margin-top:4px; }

.risk-legend { display:flex; gap:16px; justify-content:center; margin-top:16px; }
.rl-item { display:flex; align-items:center; gap:6px; font-size:12px; color:var(--text-soft); }
.rl-dot { width:10px; height:10px; border-radius:50%; }

.alert-breakdown { display:flex; flex-direction:column; gap:6px; }
.ab-row { display:flex; align-items:center; gap:10px; font-size:12px; }
.ab-label { flex:1; color:var(--text-soft); }
.ab-bar { flex:2; height:8px; background:var(--bg-surface); border-radius:4px; overflow:hidden; }
.ab-fill { height:100%; background:var(--accent); border-radius:4px; transition:width .4s ease; }
.ab-count { width:30px; text-align:right; font-weight:700; color:var(--text); }

/* ── Responsive ── */
@media (max-width:1024px) {
  .command-layout { grid-template-columns:1fr; grid-template-rows:260px 1fr; }
  .alert-sidebar { max-height:260px; }
  .onboard-layout { grid-template-columns:1fr; grid-template-rows:1fr 300px; }
  .onboard-history { max-height:300px; }
  .patient-detail-panel { width:100%; }
}
@media (max-width:768px) {
  .kpi-row { grid-template-columns:1fr 1fr; }
  .dash-topbar { flex-wrap:wrap; gap:8px; }
  .topbar-tabs { order:3; width:100%; overflow-x:auto; }
  .analytics-grid { grid-template-columns:1fr; }
  .drawer-actions { grid-template-columns:1fr; }
}
